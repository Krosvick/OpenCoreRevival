{% extends 'base.html' %} {% load static %} {% block content %}
{% block news %}
{% load encode_decode %}

{% if error_message %}
<div class="alert alert-warning">
    {{ error_message }}
</div>
{% endif %}

{% if latest_news %}
<div class="hero-grid">
  <div class="latest-news-grid">
    <div class="latest-news-principal">
      <div class="image-wrapper-principal">
        <a href="{{ latest_news.0.link  }}">
          {% if latest_news.0.img_url %}
          <img src="{{ latest_news.0.img_url }}" alt="{{ latest_news.0.title }}" class="image-replace" loading="lazy"/>
          {% else %}
          <img src="{% static 'img/logo.png' %}" alt="{{ latest_news.0.title }}" class="image-replace-placeholder" loading="lazy"/>
          {% endif %}
        </a>
        <div class="sentiment-tag {{ latest_news.0.sentiment|lower }}">
          <div class="button-text">
            {{ latest_news.0.sentiment }}
          </div>
        </div>
      </div>
      <div class="content-principal">
        <div class="heading-h-2">
          <a href="{{ latest_news.0.link }}">
            {{ latest_news.0.title }}
          </a>
        </div>
        <div class="spacer"></div>
        <div class="divider"></div>
        <div class="spacer"></div>
        <div class="top">
          <div class="author-wrapper">
            <div class="circle-avatar">
              <div class="avatar-frame-principal">
                {% if latest_news.0.website %}
                    <img src="{% static 'img/source_logos/' %}{{ latest_news.0.website }}.png"
                        alt="{{ latest_news.0.website }}">
                {% else %}
                    <img src="{% static 'img/logo.png' %}" alt="Default source">
                {% endif %}
              </div>
            </div>
          </div>
          <div class="card-date2">
            {{ latest_news.0.date_published|date:"j \d\e F, Y" }}
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="grid-1-col">
    {% for news in latest_news|slice:"1:" %}
    <div class="blog-card-v-5-mini">
      <div class="image-wrapper-mini">
        <a href="{{ news.link }}">
          {% if news.img_url %}
          <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
          {% else %}
          <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
          {% endif %}
        </a>
        <div class="sentiment-tag {{ news.sentiment|lower }}">
          <div class="button-text">
            {{ news.sentiment }}
          </div>
        </div>
      </div>
      <div class="content-mini">
        <div class="heading-h-2-mini">
          <a href="{{ news.link }}">
            {{ news.title }}
          </a>
        </div>
        <div class="spacer2"></div>
        <div class="top-mini">
          <div class="card-avatar">
            <div class="card-avatar-mini">
              {% if news.website %}
                  <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
              {% else %}
                  <img src="{% static 'img/logo.png' %}" alt="Default source">
              {% endif %}
            </div>
          </div>
          <div class="card-date-mini">
            {{ news.date_published|date:"j \d\e F, Y" }}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<div class="spacer"></div>

<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-1">Noticias recientes</div>
    <div class="spacer"></div>
    <div class="subheader">
      Enterate de las últimas noticias de la política chilena.
    </div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-recent">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in recent_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>

<div class="spacer"></div>

<div class="stats">
  <div class="heading-h-2">Nuestra trayectoria</div>
  <div class="spacer"></div>
  <div class="footer-description">
    Hasta la fecha, hemos trabajado incansablemente para proporcionarte análisis de sentimientos de noticias precisos y
    oportunos. Los números que se presentarán a continuación son un testimonio de nuestro compromiso, ayudándote a
    entender mejor el panorama mediático y a tomar decisiones informadas.
  </div>
  <div class="spacer2"></div>
  <div class="stats-row">
    <div class="stat-card">
      <div class="big-number">
        {{ total_news }}
      </div>
      <div class="spacer"></div>
      <div class="heading-h-3">Noticias</div>
      <div class="spacer"></div>
    </div>
    <div class="stat-card">
      <div class="big-number">
        {{ total_words }}
      </div>
      <div class="spacer"></div>
      <div class="heading-h-3">Palabras</div>
      <div class="spacer"></div>
    </div>
    <div class="stat-card">
      <div class="big-number">8</div>
      <div class="spacer"></div>
      <div class="heading-h-3">Fuentes</div>
      <div class="spacer"></div>
    </div>
  </div>
</div>

<div class="spacer"></div>

{% if neutral_news %}
<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-2">Noticias neutrales</div>
    <div class="spacer"></div>
    <div class="subheader">
      Noticias que presentan una perspectiva equilibrada y objetiva de los acontecimientos políticos.
    </div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-neutral">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in neutral_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>
{% endif %}

<div class="spacer"></div>

<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-2">Noticias positivas</div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-positive">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in positive_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>

<div class="spacer"></div>

<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-2">Noticias negativas</div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-negative">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in negative_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy" />
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy" />
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>

<div class="spacer"></div>

<div class="stats">
  <div class="source-logos-content">
    <div class="heading-h-2">Nuestras fuentes</div>
    <div class="spacer"></div>
    <div class="footer-description">
      Trabajamos con fuentes de noticias confiables para proporcionar la información más precisa y actualizada.
    </div>
    <div class="spacer"></div>
    <div class="logos-wrapper">
      <a href="https://www.adnradio.cl/">
        <img src="{% static 'img/source_logos/adn.png' %}" alt="ADN">
      </a>
      <a href="https://www.chilevision.cl/">
        <img src="{% static 'img/source_logos/chvn.png' %}" alt="Chilevision">
      </a>
      <a href="https://www.cnnchile.com/">
        <img src="{% static 'img/source_logos/cnn.png' %}" alt="CNN">
      </a>
      <a href="https://www.eldinamo.cl/">
        <img src="{% static 'img/source_logos/dinamo.png' %}" alt="El dinamo">
      </a>
      <a href="https://www.elmostrador.cl/">
        <img src="{% static 'img/source_logos/elmostrador.png' %}" alt="El mostrador">
      </a>
      <a href="https://www.latercera.com/">
        <img src="{% static 'img/source_logos/latercera.png' %}" alt="La tercera">
      </a>
      <a href="https://www.meganoticias.cl/">
        <img src="{% static 'img/source_logos/meganoticias.png' %}" alt="Mega">
      </a>
      <a href="https://www.t13.cl/">
        <img src="{% static 'img/source_logos/t13.png' %}" alt="T13">
      </a>
    </div>
  </div>
</div>

{% else %}
<div class="hero-grid">
  <div class="latest-news-grid">
    <div class="latest-news-principal">
      <div class="content-principal">
        <div class="heading-h-2">
          No hay noticias disponibles en este momento
        </div>
      </div>
    </div>
  </div>
</div>
{% endif %}

{% if recent_news %}
<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-1">Noticias recientes</div>
    <div class="spacer"></div>
    <div class="subheader">
      Enterate de las últimas noticias de la política chilena.
    </div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-recent">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in recent_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>
{% endif %}

{% if positive_news %}
<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-2">Noticias positivas</div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-positive">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in positive_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy"/>
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy"/>
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>
{% endif %}

{% if negative_news %}
<div class="recent-news-grid">
  <div class="recent-news-grid2">
    <div class="heading-h-2">Noticias negativas</div>
    <div class="spacer"></div>
  </div>
  <div class="glide" id="glide-negative">
    <div class="glide__track" data-glide-el="track">
      <ul class="glide__slides">
        {% for news in negative_news %}
        <li class="glide__slide">
          <div class="item">
            <div class="image-replace">
              <a href="{{ news.link }}">
                {% if news.img_url %}
                <img src="{{ news.img_url }}" alt="{{ news.title }}" class="image-replace" loading="lazy" />
                {% else %}
                <img src="{% static 'img/logo.png' %}" alt="{{ news.title }}" class="image-replace-placeholder" loading="lazy" />
                {% endif %}
              </a>
              <div class="sentiment-tag {{ news.sentiment|lower }}">
                <div class="button-text">
                  {{ news.sentiment }}
                </div>
              </div>
            </div>
            <div class="heading-h-3">
              <a href="{{ news.link }}">
                {{ news.title|truncatechars:60 }}
              </a>
            </div>
            <div class="spacer"></div>
            <div class="top-mini">
              <div class="card-avatar">
                <div class="card-avatar-mini">
                  {% if news.website %}
                      <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
                  {% else %}
                      <img src="{% static 'img/logo.png' %}" alt="Default source">
                  {% endif %}
                </div>
              </div>
              <div class="card-date-mini">
                {{ news.date_published|date:"j \d\e F, Y" }}
              </div>
            </div>
          </div>
        </li>
        {% endfor %}
      </ul>
    </div>
    <div class="glide__arrows" data-glide-el="controls">
      <button class="glide__arrow glide__arrow--left" data-glide-dir="<">&larr;</button>
      <button class="glide__arrow glide__arrow--right" data-glide-dir=">">&rarr;</button>
    </div>
  </div>
</div>
</div>
{% endif %}

{% endblock %}
{% endblock %}