{% extends 'base.html' %}
{% load static %}

{% block title %}
Busqueda
{% endblock %}

{% block results_count %}
Resultados encontrados: {{ total_results }}
{% endblock %}

{% block content %} {% block query_results %}
{% load encode_decode %}

<div class="search-results-grid">
  <div class="search-cards-grid">
    {% for news in page_obj.object_list %}
    <div class="search-item">
      <div class="image-replace">
        <a href="{{ news.link }}">
          {% if news.img_url %}
          <img src="{{ news.img_url }}" alt="{{ news.title|encode_decode }}" class="image-replace" loading="lazy" />
          {% else %} 
          <img src="{% static 'img/logo.png' %}" alt="{{ news.title|encode_decode }}" class="image-replace-placeholder" />
          {% endif %}
        </a>
        <div class="sentiment-tag {{ news.sentiment|lower }}">
          <div class="button-text">
            {{ news.sentiment }}
          </div>
        </div>
      </div>
      <div class="heading-h-3">
        <a href="{{ news.link }}">
          {{ news.title|encode_decode|truncatechars:60 }}
        </a>
      </div>
      <div class="spacer"></div>
      <div class="top-mini">
        <div class="card-avatar">
          <div class="card-avatar-mini">
            <img src="{% static 'img/source_logos/' %}{{ news.website }}.png" alt="{{ news.website }}">
          </div>
        </div>
        <div class="card-date-mini">
          {{ news.date_published|date:"j \d\e F, Y" }}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <div class="spacer"></div>
  <div class="pagination">
    {% if page_obj.has_previous %}
    <div class="pagination-arrows left">
      <a href="?query={{ query|urlencode }}&page={{ page_obj.previous_page_number }}">&larr; </a>
    </div>
    {% endif %}

    {% for i in page_obj.paginator.page_range %}
    <div class="pagination-number{% if page_obj.number == i %} active{% endif %}">
      {% if page_obj.number == i %}
        <span>{{ i }}</span>
      {% else %}
        <a href="?query={{ query|urlencode }}&page={{ i }}">{{ i }}</a>
      {% endif %}
    </div>
    {% endfor %}

    {% if page_obj.has_next %}
    <div class="pagination-arrows right">
      <a href="?query={{ query|urlencode }}&page={{ page_obj.next_page_number }}"> &rarr;</a>
    </div>
    {% endif %}
  </div>
</div>

<div class="spacer"></div>

{% endblock %} {% endblock %}